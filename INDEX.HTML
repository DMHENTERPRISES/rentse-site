<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RENT SE PROPERTIES | Indore</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff; color: #000; margin: 0; }
        .hero-gradient { background: linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.8) 100%); }
    </style>
</head>
<body class="antialiased">

    <section class="relative h-[80vh] w-full flex items-center justify-center bg-black overflow-hidden">
        <div class="absolute top-10 left-10 z-[100] flex items-center space-x-3">
            <img src="logo.png" alt="Logo" class="h-10 w-auto">
            <span class="text-white text-xl font-900 uppercase">RENT SE PROPERTIES</span>
        </div>
        <video autoplay muted loop playsinline class="absolute w-full h-full object-cover opacity-60">
            <source src="hero.mp4" type="video/mp4">
        </video>
        <div class="hero-gradient absolute inset-0"></div>
        <div class="relative z-10 text-center text-white px-6">
            <h1 class="text-5xl md:text-8xl font-900 tracking-tighter mb-8 uppercase">Best Properties In Indore</h1>
        </div>
    </section>

    <section id="properties" class="py-20 px-6 md:px-12">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl font-900 uppercase mb-12 border-b pb-4">All Listings</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-10" id="listingGrid">
                </div>
            <p id="statusMsg" class="text-center text-gray-400 mt-10 uppercase tracking-widest text-sm"></p>
        </div>
    </section>

    <script>
        async function loadProperties() {
            const grid = document.getElementById('listingGrid');
            const status = document.getElementById('statusMsg');
            
            // TERA SAHI REPO PATH
            const username = "kushallxd";
            const repo = "rentse-site";
            const folder = "properties";

            try {
                status.innerText = "Fetching listings...";
                const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/${folder}?t=${Date.now()}`;
                
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error("GitHub API Error: " + response.status);
                
                const files = await response.json();
                grid.innerHTML = '';
                
                let count = 0;
                for (const file of files) {
                    if (file.name.endsWith('.md')) {
                        const res = await fetch(file.download_url);
                        const text = await res.text();
                        
                        // Clean data extraction
                        const titleMatch = text.match(/title:\s*["']?(.*?)["']?\r?\n/);
                        const priceMatch = text.match(/price:\s*["']?(.*?)["']?\r?\n/);
                        const imageMatch = text.match(/image:\s*["']?(.*?)["']?\r?\n/);

                        const title = titleMatch ? titleMatch[1] : "Property";
                        const price = priceMatch ? priceMatch[1] : "TBA";
                        let image = imageMatch ? imageMatch[1] : "logo.png";

                        // Fix leading slash
                        if (image.startsWith('/')) image = image.substring(1);

                        grid.innerHTML += `
                            <div class="prop-card border p-4 hover:shadow-xl transition bg-white rounded-lg">
                                <img src="${image}" class="w-full aspect-[4/3] object-cover mb-4 rounded" onerror="this.src='logo.png'">
                                <h4 class="text-xl font-900 uppercase">${title}</h4>
                                <p class="text-blue-600 font-bold mt-2">${price}</p>
                            </div>`;
                        count++;
                    }
                }
                status.innerText = count > 0 ? `${count} Active Listings` : "No properties found in folder";
            } catch (e) {
                console.error("DASHBOARD ERROR:", e);
                status.innerText = "Error: Please check if properties folder exists on GitHub";
            }
        }
        loadProperties();
    </script>
</body>
</html>
